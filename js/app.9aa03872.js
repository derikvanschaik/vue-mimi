(function(){"use strict";var e={1948:function(e,t,n){var i=n(9963),s=n(6252),a=n(3577);const o=e=>((0,s.dD)("data-v-358eb44c"),e=e(),(0,s.Cn)(),e),l={key:1,class:"container my-2"},d=o((()=>(0,s._)("div",{class:"row"},[(0,s._)("div",{class:"jumbotron my-1 rounded"},[(0,s._)("h1",{class:"display-4"},"MIMI: Mindmaps made easy"),(0,s._)("p",{class:"lead"},"Either click one of the links below to explore existing mindmaps, or create a new mindmap on the right! ")])],-1))),r={class:"row"},c={class:"col-8"},x={class:"list-group"},h=["onClick"],p={class:"action-menu"},m=["onClick"],u=["onClick"],b={class:"col-4"},g={class:"form-group my-5"},k=o((()=>(0,s._)("label",{for:"mindmap-name"},"Mindmap Name",-1))),f={class:"form-group my-5"},w={for:"mindmap-name"},M=o((()=>(0,s._)("h4",null,"This action cannot be undone. Please confirm.",-1))),y={key:0,class:"alert alert-danger"},v=o((()=>(0,s._)("h4",null,"WARNING",-1)));function C(e,t,n,o,C,T){const _=(0,s.up)("mind-map"),L=(0,s.up)("modal-component");return null!==C.idx?((0,s.wg)(),(0,s.j4)(_,{key:C.idx,curTextboxes:C.mindmaps[C.idx].textboxes,curLines:C.mindmaps[C.idx].lines,handleClose:()=>T.setIdx(null),updateTextboxesHandler:T.updateTextboxes,updateLinesHandler:T.updateLines,navigateMindmap:T.navigateMindmapCallback(),path:C.path,pathChange:T.pathChangeCallback(),mindmaps:C.mindmaps,createLinkHandler:T.createLink},null,8,["curTextboxes","curLines","handleClose","updateTextboxesHandler","updateLinesHandler","navigateMindmap","path","pathChange","mindmaps","createLinkHandler"])):((0,s.wg)(),(0,s.iD)("div",l,[d,(0,s._)("div",r,[(0,s._)("div",c,[(0,s._)("ul",x,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.mindmaps,((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:t,class:"list-group-item d-flex justify-content-between"},[(0,s._)("a",{href:"#",onClick:e=>T.setIdx(t)},(0,a.zw)(e.title),9,h),(0,s._)("div",p,[(0,s._)("button",{type:"button",class:"btn btn-outline-dark mx-3",onClick:e=>T.openEditMindmapModal(t)},"Edit",8,m),(0,s._)("button",{type:"button",class:"btn btn-outline-danger",onClick:e=>T.openDeleteMindmapModal(t)},"Delete",8,u)])])))),128))])]),(0,s._)("div",b,[(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>T.openCreateNewModal&&T.openCreateNewModal(...e)),class:"btn btn-secondary"},"New Mindmap")])]),(0,s.Wm)(L,{handleClose:T.closeModal,show:T.showCreateNewModal},{default:(0,s.w5)((()=>[(0,s._)("div",g,[k,(0,s.wy)((0,s._)("input",{class:"form-control",name:"mindmap-name",placeholder:"Enter new mindmap name","onUpdate:modelValue":t[1]||(t[1]=e=>C.newMindmapName=e)},null,512),[[i.nr,C.newMindmapName]])]),(0,s._)("button",{class:"btn btn-secondary my-3",onClick:t[2]||(t[2]=(...e)=>T.createNewMindmap&&T.createNewMindmap(...e))},"Create"),(0,s._)("button",{class:"btn btn-outline-danger",onClick:t[3]||(t[3]=(...e)=>T.closeModal&&T.closeModal(...e))},"Cancel")])),_:1},8,["handleClose","show"]),(0,s.Wm)(L,{handleClose:T.closeModal,show:T.showEditModal},{default:(0,s.w5)((()=>[(0,s._)("div",f,[(0,s._)("label",w,"Enter new name for mindmap '"+(0,a.zw)(T.previousTitle)+"' :",1),(0,s.wy)((0,s._)("input",{class:"form-control",name:"mindmap-name",placeholder:"Enter new mindmap name","onUpdate:modelValue":t[4]||(t[4]=e=>C.newMindmapName=e)},null,512),[[i.nr,C.newMindmapName]])]),(0,s._)("button",{class:"btn btn-secondary my-3",onClick:t[5]||(t[5]=(...e)=>T.editMindmapTitle&&T.editMindmapTitle(...e))},"Change"),(0,s._)("button",{class:"btn btn-outline-danger",onClick:t[6]||(t[6]=(...e)=>T.closeModal&&T.closeModal(...e))},"Cancel")])),_:1},8,["handleClose","show"]),(0,s.Wm)(L,{handleClose:T.closeModal,show:T.showDeleteModal},{default:(0,s.w5)((()=>[M,T.getLinkReferenceCount>0?((0,s.wg)(),(0,s.iD)("div",y,[v,(0,s._)("p",null," you have "+(0,a.zw)(T.getLinkReferenceCount)+" link"+(0,a.zw)(T.getLinkReferenceCount>1?"s":"")+" to this mindmap, deleting this mindmap will make them dead links. ",1)])):(0,s.kq)("",!0),(0,s._)("button",{class:"btn btn-danger my-3",onClick:t[7]||(t[7]=(...e)=>T.deleteMindmap&&T.deleteMindmap(...e))},"Delete"),(0,s._)("button",{class:"btn btn-secondary",onClick:t[8]||(t[8]=(...e)=>T.closeModal&&T.closeModal(...e))},"Cancel")])),_:1},8,["handleClose","show"])]))}n(7658);const T=["width","height"],_=(0,s._)("span",{class:"close-icon"},"+",-1),L=[_],I={class:"menu"},D=["disabled"],N=["disabled"],E={class:"path"},S=(0,s._)("p",{class:"my-3"},"Create a link to one of the following mindmaps:",-1),Y=["value"],H={class:"my-3"};function F(e,t,n,o,l,d){const r=(0,s.up)("drag-text"),c=(0,s.up)("link-component"),x=(0,s.up)("modal-component");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("canvas",{width:l.width,height:l.height,ref:"canvas"},null,8,T),(0,s._)("div",{onClick:t[0]||(t[0]=(...e)=>n.handleClose&&n.handleClose(...e)),class:"close"},L),(0,s._)("div",I,[(0,s._)("button",{class:"menu-btn btn btn-light btn-outline-dark mx-1",onClick:t[1]||(t[1]=(...e)=>d.addTextbox&&d.addTextbox(...e))},"Add Tbox"),(0,s._)("button",{class:"menu-btn btn btn-light btn-outline-dark mx-1",onClick:t[2]||(t[2]=(...e)=>d.connectedSelected&&d.connectedSelected(...e)),disabled:d.cannotConnect},"Connect",8,D),(0,s._)("button",{class:"menu-btn btn btn-light btn-outline-dark mx-1",onClick:t[3]||(t[3]=(...e)=>d.toggleShowMindmapList&&d.toggleShowMindmapList(...e)),disabled:d.cannotLink},"Link",8,N)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.textboxes,((e,t)=>((0,s.wg)(),(0,s.j4)(r,{key:e.id,idx:t,onDragStart:d.handleDragStart,updateLinesHandler:d.updateLines,updateTextbox:d.updateTextbox(t),deleteTextbox:d.deleteTextbox(t),selectTextbox:d.selectTextbox(t),updateTextboxText:d.updateTextboxText(t),selected:e.selected,text:e.text,startX:e.x,startY:e.y,link:e.link,navigateMindmap:n.navigateMindmap},null,8,["idx","onDragStart","updateLinesHandler","updateTextbox","deleteTextbox","selectTextbox","updateTextboxText","selected","text","startX","startY","link","navigateMindmap"])))),128)),(0,s._)("ul",E,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.path,((e,t)=>((0,s.wg)(),(0,s.j4)(c,{class:"link",key:e,text:e.title,handleNavigate:()=>d.handlePathChange(t,e.link)},null,8,["text","handleNavigate"])))),128))]),(0,s.Wm)(x,{show:l.showMindmapList,handleClose:()=>l.showMindmapList=!1},{default:(0,s.w5)((()=>[S,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.linkedMindmapIdx=e),class:"form-select"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.mindmaps,((e,t)=>((0,s.wg)(),(0,s.iD)("option",{key:t,value:t},(0,a.zw)(e.title),9,Y)))),128))],512),[[i.bM,l.linkedMindmapIdx]]),(0,s._)("div",H,[(0,s._)("button",{class:"btn btn-success mx-3",onClick:t[5]||(t[5]=(...e)=>d.linkTextboxToMindmap&&d.linkTextboxToMindmap(...e))},"Create Link"),(0,s._)("button",{class:"btn btn-secondary",onClick:t[6]||(t[6]=(...e)=>d.toggleShowMindmapList&&d.toggleShowMindmapList(...e))},"Cancel")])])),_:1},8,["show","handleClose"])],64)}const X={key:0,class:"textbox-text"},B={key:0},O={key:1},j=["checked"];function A(e,t,n,o,l,d){const r=(0,s.up)("link-component");return(0,s.wg)(),(0,s.iD)("div",{ref:"textbox",class:"textbox",onMousedown:t[5]||(t[5]=(...e)=>d.emitDragStart&&d.emitDragStart(...e))},[l.isEditing?(0,s.wy)(((0,s.wg)(),(0,s.iD)("textarea",{key:1,"onUpdate:modelValue":t[0]||(t[0]=e=>l.inputText=e),rows:"7",onInput:t[1]||(t[1]=(...t)=>e.handleInput&&e.handleInput(...t)),class:".text-area"},null,544)),[[i.nr,l.inputText]]):((0,s.wg)(),(0,s.iD)("div",X,[n.link>=0?((0,s.wg)(),(0,s.iD)("div",B,[(0,s.Wm)(r,{handleNavigate:d.handleNavigate,text:l.inputText},null,8,["handleNavigate","text"])])):((0,s.wg)(),(0,s.iD)("div",O,(0,a.zw)(l.inputText),1))])),(0,s._)("span",{class:"delete",onClick:t[2]||(t[2]=(...e)=>d.handleDelete&&d.handleDelete(...e))},"×"),(0,s._)("button",{onClick:t[3]||(t[3]=(...e)=>d.toggleIsEditing&&d.toggleIsEditing(...e))},(0,a.zw)(l.isEditing?"Done":"Edit"),1),(0,s._)("input",{onClick:t[4]||(t[4]=(...e)=>d.handleSelect&&d.handleSelect(...e)),type:"checkbox",class:"select",checked:n.selected},null,8,j)],544)}function P(e,t,n,i,o,l){return(0,s.wg)(),(0,s.iD)("a",{href:"#",onClick:t[0]||(t[0]=(...e)=>n.handleNavigate&&n.handleNavigate(...e))},(0,a.zw)(n.text),1)}var z={props:{text:String,handleNavigate:Function}},$=n(3744);const W=(0,$.Z)(z,[["render",P]]);var R=W,V={name:"App",components:{LinkComponent:R},props:{updateLinesHandler:Function,updateTextbox:Function,deleteTextbox:Function,selectTextbox:Function,updateTextboxText:Function,selected:Boolean,text:String,startX:Number,startY:Number,idx:Number,link:Number,navigateMindmap:Function},mounted(){this.repositionTextBox()},updated(){this.repositionTextBox()},data(){return{x:this.startX,y:this.startY,isEditing:!1,inputText:this.text}},methods:{repositionTextBox(){this.$refs.textbox.style.left=`${this.startX}px`,this.$refs.textbox.style.top=`${this.startY}px`},emitDragStart(e){this.isEditing||this.$emit("dragStart",e.clientX,e.clientY,this.idx)},handleDelete(){this.deleteTextbox(),this.updateLinesHandler(this.$refs.textbox.offsetLeft,this.$refs.textbox.offsetTop)},handleSelect(e){e.stopPropagation(),this.selectTextbox()},toggleIsEditing(){this.isEditing=!this.isEditing,this.isEditing||this.updateTextboxText(this.inputText)},handleNavigate(){this.navigateMindmap(this.link)}}};const Z=(0,$.Z)(V,[["render",A],["__scopeId","data-v-4df42b3c"]]);var K=Z;const U={class:"modal-content"};function q(e,t,n,i,o,l){return(0,s.wg)(),(0,s.iD)("div",{class:"modal",style:(0,a.j5)({display:n.show?"block":"none"})},[(0,s._)("div",U,[(0,s._)("span",{class:"close-btn",onClick:t[0]||(t[0]=e=>n.handleClose())},"×"),(0,s.WI)(e.$slots,"default")])],4)}var G={props:{show:Boolean,handleClose:Function}};const J=(0,$.Z)(G,[["render",q]]);var Q=J;const{v4:ee}=n(7429);var te={components:{DragText:K,LinkComponent:R,ModalComponent:Q},props:{curTextboxes:Array,curLines:Array,handleClose:Function,updateTextboxesHandler:Function,updateLinesHandler:Function,navigateMindmap:Function,path:Array,pathChange:Function,mindmaps:Array,createLinkHandler:Function},mounted(){this.clearCanvasAndDrawLines(),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",(()=>this.isDragging=!1))},computed:{cannotConnect(){return 2!==this.textboxes.filter((e=>e.selected)).length},cannotLink(){return 1!==this.textboxes.filter((e=>e.selected)).length}},data(){return{width:window.innerWidth,height:window.innerHeight,textboxes:this.curTextboxes,lines:this.curLines,isDragging:!1,x:0,y:0,dragBoxIdx:-1,showMindmapList:!1,linkedMindmapIdx:null}},methods:{handleDragStart(e,t,n){this.isDragging=!0,this.x=e,this.y=t,this.dragBoxIdx=n},handleMouseMove(e){if(this.isDragging){const t=e.clientX-this.x,n=e.clientY-this.y,i=this.textboxes[this.dragBoxIdx].x,s=this.textboxes[this.dragBoxIdx].y;this.textboxes[this.dragBoxIdx].x+=t,this.textboxes[this.dragBoxIdx].y+=n,this.x=e.clientX,this.y=e.clientY,this.textboxes=this.textboxes.map((e=>e)),this.updateLines(i,s,this.textboxes[this.dragBoxIdx].x,this.textboxes[this.dragBoxIdx].y)}},addTextbox(){this.textboxes.push({x:500,y:500,text:"click edit to change text",selected:!1,id:ee(),link:-1})},selectTextbox(e){return()=>{this.textboxes[e].selected=!this.textboxes[e].selected}},deleteTextbox(e){return()=>{this.textboxes=this.textboxes.filter(((t,n)=>n!==e))}},updateTextbox(e){return(t,n)=>{this.textboxes[e]={...this.textboxes[e],x:t,y:n}}},updateTextboxText(e){return t=>{this.textboxes[e]={...this.textboxes[e],text:t}}},clearCanvasAndDrawLines(){const e=this.$refs.canvas.getContext("2d");e.clearRect(0,0,this.width,this.height),this.lines.forEach((t=>{e.beginPath(),e.moveTo(t.fromX,t.fromY),e.lineTo(t.toX,t.toY),e.stroke()}))},updateLines(e,t,n,i){const s=(null===n||void 0===n)&&(null===i||void 0===i);for(let a=0;a<this.lines.length;a++){const{fromX:o,fromY:l,toX:d,toY:r}=this.lines[a];o===e&&l===t?this.lines[a]=s?null:{fromX:n,fromY:i,toX:d,toY:r}:d===e&&r===t&&(this.lines[a]=s?null:{fromX:o,fromY:l,toX:n,toY:i})}this.lines=this.lines.filter((e=>null!==e)),this.clearCanvasAndDrawLines()},connectedSelected(){const[e,t]=this.textboxes.filter((e=>e.selected)),n={fromX:e.x,fromY:e.y,toX:t.x,toY:t.y};this.lines.push(n),this.clearCanvasAndDrawLines(),this.textboxes.forEach((e=>e.selected=!1))},handlePathChange(e,t){this.pathChange(e,t)},toggleShowMindmapList(){this.showMindmapList=!this.showMindmapList,this.showMindmapList?(this.linkedMindmapIdx=this.textboxes.find((e=>!0===e.selected)).link,-1===this.linkedMindmapIdx&&(this.linkedMindmapIdx=null)):this.linkedMindmapIdx=null},linkTextboxToMindmap(){const e=this.textboxes.indexOf(this.textboxes.find((e=>!0===e.selected)));this.createLinkHandler(e,this.linkedMindmapIdx),this.toggleShowMindmapList(),this.textboxes.forEach((e=>e.selected=!1))}},watch:{textboxes:{handler(e){this.updateTextboxesHandler(e)},deep:!0},lines(e){this.updateLinesHandler(e)}}};const ne=(0,$.Z)(te,[["render",F]]);var ie=ne;const{v4:se}=n(7429);var ae={components:{MindMap:ie,ModalComponent:Q},computed:{previousTitle(){return null!==this.editIdx?this.mindmaps[this.editIdx].title:""},showCreateNewModal(){return!0===this.modal.open&&"create"===this.modal.type},showEditModal(){return!0===this.modal.open&&"edit"===this.modal.type},showDeleteModal(){return!0===this.modal.open&&"delete"===this.modal.type},getLinkReferenceCount(){let e=0;if(null!==this.deleteIdx)for(const t of this.mindmaps)for(const n of t.textboxes)n.link===this.deleteIdx&&e++;return e}},data(){return{modal:{open:!1,type:"create"},newMindmapName:"",deleteIdx:null,editIdx:null,idx:null,mindmaps:[{title:"My Company",textboxes:[{x:600,y:100,text:"Careers",selected:!1,id:se(),link:1},{x:10,y:100,text:"Employees",selected:!1,id:se(),link:2}],lines:[]},{title:"Occupations",textboxes:[{x:100,y:100,text:"Engineering",selected:!1,id:se(),link:3},{x:400,y:500,text:"Finance",selected:!1,id:se(),link:4},{x:600,y:100,text:"Marketing",selected:!1,id:se(),link:5}],lines:[]},{title:"Employees @ company",textboxes:[{x:200,y:500,text:"Jeff Caronzo",selected:!1,id:se(),link:-1},{x:500,y:500,text:"Silas Bonana",selected:!1,id:se(),link:-1}],lines:[]},{title:"types of Engineering",textboxes:[{x:100,y:100,text:"Software",selected:!1,id:se(),link:-1},{x:400,y:500,text:"Financial",selected:!1,id:se(),link:-1},{x:600,y:100,text:"Civil",selected:!1,id:se(),link:-1}],lines:[]},{title:"types of Finance",textboxes:[{x:100,y:100,text:"Accounting",selected:!1,id:se(),link:-1},{x:400,y:500,text:"Legal",selected:!1,id:se(),link:-1},{x:600,y:100,text:"Venture Capital",selected:!1,id:se(),link:-1}],lines:[]},{title:"types of Marketing",textboxes:[{x:100,y:100,text:"Digital",selected:!1,id:se(),link:-1},{x:400,y:500,text:"Media",selected:!1,id:se(),link:-1}],lines:[]}],path:[]}},watch:{idx(e,t){null!==e&&null===t&&(this.path=[],this.addToPath(e))}},methods:{setIdx(e){this.idx=e},setEditIdx(e){this.editIdx=e},setDeleteIdx(e){this.deleteIdx=e},updateTextboxes(e){this.mindmaps[this.idx].textboxes=e},updateLines(e){this.mindmaps[this.idx].lines=e},navigateMindmapCallback(){return e=>{this.setIdx(e),this.addToPath(e)}},addToPath(e){this.path.push({link:e,title:this.mindmaps[e].title})},pathChangeCallback(){return(e,t)=>{this.path=this.path.slice(0,e+1),this.idx=t}},createLink(e,t){this.mindmaps[this.idx].textboxes[e].link=t},openCreateNewModal(){this.modal={open:!0,type:"create"}},openEditMindmapModal(e){this.setEditIdx(e),this.modal={open:!0,type:"edit"}},openDeleteMindmapModal(e){this.setDeleteIdx(e),this.modal={open:!0,type:"delete"}},closeModal(){this.modal.open=!1},isMindmapNameEmpty(){return""===this.newMindmapName&&(alert("Mindmap name cannot be blank!"),!0)},createNewMindmap(){if(this.isMindmapNameEmpty())return;const e={title:this.newMindmapName,textboxes:[],lines:[]};this.mindmaps.push(e),this.newMindmapName="",this.modal.open=!1},editMindmapTitle(){this.isMindmapNameEmpty()||(this.mindmaps[this.editIdx].title=this.newMindmapName,this.newMindmapName="",this.modal.open=!1)},deleteMindmap(){for(const e of this.mindmaps)for(const t of e.textboxes)t.link===this.deleteIdx&&(t.link=-1),t.link>this.deleteIdx&&(t.link-=1);this.mindmaps=[...this.mindmaps.slice(0,this.deleteIdx),...this.mindmaps.slice(this.deleteIdx+1,this.mindmaps.length)],this.modal.open=!1}}};const oe=(0,$.Z)(ae,[["render",C],["__scopeId","data-v-358eb44c"]]);var le=oe;(0,i.ri)(le).mount("#app")}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,i,s,a){if(!i){var o=1/0;for(c=0;c<e.length;c++){i=e[c][0],s=e[c][1],a=e[c][2];for(var l=!0,d=0;d<i.length;d++)(!1&a||o>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[d])}))?i.splice(d--,1):(l=!1,a<o&&(o=a));if(l){e.splice(c--,1);var r=s();void 0!==r&&(t=r)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[i,s,a]}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,a,o=i[0],l=i[1],d=i[2],r=0;if(o.some((function(t){return 0!==e[t]}))){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(d)var c=d(n)}for(t&&t(i);r<o.length;r++)a=o[r],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},i=self["webpackChunkmimi"]=self["webpackChunkmimi"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(1948)}));i=n.O(i)})();
//# sourceMappingURL=app.9aa03872.js.map